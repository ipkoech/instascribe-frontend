<mat-toolbar style="position: sticky; top: 0; z-index: 5">
  <div class="toolbar-content">
    <div class="logo-container">
      <img src="assets/icons8-logo-50.svg" alt="Logo" class="logo" />
      <span class="brand-name">Instascribe</span>
      <button
        style="margin-inline-start: 10px"
        mat-icon-button
        (click)="sidenav.toggle()"
      >
        <mat-icon>menu</mat-icon>
      </button>
    </div>
    <div class="toolbar-actions">
      <div class="search-bar">
        <mat-icon>search</mat-icon>
        <input type="text" placeholder="Search..." />
      </div>
      <!-- <button mat-icon-button>
        <mat-icon>notifications</mat-icon>
      </button> -->
      <button
        [mat-menu-trigger-for]="menu"
        matBadgePosition="above after"
        *ngIf="userService.user"
        [matBadge]="
          (notificationsService.notifications?.total ?? 0) +
          notificationsService.new_notifications.length
        "
        style="margin-inline-start: auto"
        matBadgeColor="primary"
        mat-icon-button
      >
        <mat-icon style="transform: scale(0.8)">notifications</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <div
          (click)="$event.stopImmediatePropagation()"
          style="
            display: flex;
            justify-content: space-between;
            padding: 8px 16px;
            align-items: center;
          "
        >
          <div style="margin: 0" class="mat-headline-6">Notifications</div>
          <button routerLink="/notifications" mat-icon-button>
            <mat-icon style="transform: scale(0.8)">open_in_full</mat-icon>
          </button>
        </div>
        <mat-divider></mat-divider>
        <ng-container
          *ngFor="
            let notification of notificationsService.new_notifications;
            let last = last
          "
        >
          <button [routerLink]="['/notifications']" mat-menu-item>
            <div>{{ notification.title }}</div>
          </button>
          <mat-divider
            *ngIf="
              !last && notificationsService.notifications?.data?.length === 0
            "
          ></mat-divider>
        </ng-container>
        <ng-container
          *ngFor="
            let notification of notificationsService.notifications?.data;
            let last = last
          "
        >
          <button [routerLink]="['/notifications']" mat-menu-item>
            <div style="font-size: smaller; font-weight: 100">
              {{ notification.title }}
            </div>
          </button>
          <mat-divider></mat-divider>
        </ng-container>
        <mat-paginator
          (page)="notificationsService.paginate($event)"
          (click)="$event.stopPropagation()"
          *ngIf="notificationsService.notifications"
          [pageSize]="notificationsService.notifications.per_page"
          [length]="notificationsService.notifications.total"
        ></mat-paginator>
      </mat-menu>
      <!-- <button mat-icon-button [matMenuTriggerFor]="userMenu">
        <mat-icon>account_circle</mat-icon>
      </button> -->
      <button
        #profileRouterLinkActive="routerLinkActive"
        routerLinkActive
        routerLink="/profile"
        *ngIf="userService.user"
        [color]="undefined"
        mat-icon-button
      >
        <mat-icon
          style="transform: scale(0.8)"
          [color]="profileRouterLinkActive.isActive ? 'primary' : undefined"
        >
          account_circle
        </mat-icon>
      </button>
      <button
        *ngIf="userService.user"
        fontSet="material-icons-outlined"
        color="warn"
        (click)="userService.logout()"
        mat-icon-button
      >
        <mat-icon style="transform: scale(0.8)">logout</mat-icon>
      </button>
    </div>
  </div>
</mat-toolbar>
